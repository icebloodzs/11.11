{"version":3,"sources":["resLoader.js","./src/js/resLoader.js"],"names":["webpackJsonp","module","exports","require","root","isFunc","f","resLoader","config","this","option","resourceType","baseUrl","resources","onStart","onProgress","onComplete","alert","i","status","total","length","currentIndex","prototype","start","_this","l","r","url","indexOf","image","Image","onload","loaded","onerror","src","ResLoader","window"],"mappings":"AAAAA,cAAc,EAAE,IAEV,SAASC,EAAQC,EAASC,ICFhC,SAAAC,GACA,GAAAC,GAAA,SAAAC,GACA,wBAAAA,IAIAC,EAAA,SAAAC,GASA,GARAC,KAAAC,QACAC,aAAA,QACAC,QAAA,KACAC,aACAC,QAAA,KACAC,WAAA,KACAC,WAAA,OAEAR,EAOA,WADAS,OAAA,QALA,KAAAC,IAAAV,GACAC,KAAAC,OAAAQ,GAAAV,EAAAU,EAOAT,MAAAU,OAAA,EACAV,KAAAW,MAAAX,KAAAC,OAAAG,UAAAQ,QAAA,EACAZ,KAAAa,aAAA,EAGAf,GAAAgB,UAAAC,MAAA,WACAf,KAAAU,OAAA,CAGA,QAFAM,GAAAhB,KACAG,EAAAH,KAAAC,OAAAE,QACAM,EAAA,EAAAQ,EAAAjB,KAAAC,OAAAG,UAAAQ,OAAqDK,EAAAR,EAAOA,IAAA,CAC5D,GAAAS,GAAAlB,KAAAC,OAAAG,UAAAK,GAAAU,EAAA,EAEAA,GADA,IAAAD,EAAAE,QAAA,gBAAAF,EAAAE,QAAA,YACAF,EAGAf,EAAAe,CAGA,IAAAG,GAAA,GAAAC,MACAD,GAAAE,OAAA,WAAkCP,EAAAQ,UAClCH,EAAAI,QAAA,WAAmCT,EAAAQ,UACnCH,EAAAK,IAAAP,EAEAvB,EAAAI,KAAAC,OAAAI,UACAL,KAAAC,OAAAI,QAAAL,KAAAW,QAIAb,EAAAgB,UAAAU,OAAA,WACA5B,EAAAI,KAAAC,OAAAK,aACAN,KAAAC,OAAAK,aAAAN,KAAAa,aAAAb,KAAAW,OAGAX,KAAAa,eAAAb,KAAAW,OACAf,EAAAI,KAAAC,OAAAM,aACAP,KAAAC,OAAAM,WAAAP,KAAAW,QAMAhB,EAAAgC,UAAA7B,GACC8B","file":"resLoader.js","sourcesContent":["webpackJsonp([3,4],[\n/* 0 */\n/***/ function(module, exports, require) {\n\n\t(function (root) {\r\n\t  var isFunc = function (f) {\r\n\t    return typeof f === 'function'\r\n\t  }\r\n\t\r\n\t  //构造器函数\r\n\t  var resLoader = function (config) {\r\n\t    this.option = {\r\n\t      resourceType: 'image', //资源类型，默认为图片\r\n\t      baseUrl: './', //基准url\r\n\t      resources: [], //资源路径数组\r\n\t      onStart: null, //加载开始回调函数，传入参数total\r\n\t      onProgress: null, //正在加载回调函数，传入参数currentIndex, total\r\n\t      onComplete: null //加载完毕回调函数，传入参数total\r\n\t    }\r\n\t    if (config) {\r\n\t      for (i in config) {\r\n\t        this.option[i] = config[i]\r\n\t      }\r\n\t    }\r\n\t    else {\r\n\t      alert('参数错误！')\r\n\t      return\r\n\t    }\r\n\t    this.status = 0 //加载器的状态，0：未启动   1：正在加载   2：加载完毕\r\n\t    this.total = this.option.resources.length || 0 //资源总数\r\n\t    this.currentIndex = 0 //当前正在加载的资源索引\r\n\t  }\r\n\t\r\n\t  resLoader.prototype.start = function () {\r\n\t    this.status = 1\r\n\t    var _this = this\r\n\t    var baseUrl = this.option.baseUrl\r\n\t    for (var i = 0, l = this.option.resources.length; i < l; i++) {\r\n\t      var r = this.option.resources[i], url = ''\r\n\t      if (r.indexOf('http://') === 0 || r.indexOf('https://') === 0) {\r\n\t        url = r\r\n\t      }\r\n\t      else {\r\n\t        url = baseUrl + r\r\n\t      }\r\n\t\r\n\t      var image = new Image()\r\n\t      image.onload = function () {_this.loaded()}\r\n\t      image.onerror = function () {_this.loaded()}\r\n\t      image.src = url\r\n\t    }\r\n\t    if (isFunc(this.option.onStart)) {\r\n\t      this.option.onStart(this.total)\r\n\t    }\r\n\t  }\r\n\t\r\n\t  resLoader.prototype.loaded = function () {\r\n\t    if (isFunc(this.option.onProgress)) {\r\n\t      this.option.onProgress(++this.currentIndex, this.total)\r\n\t    }\r\n\t    //加载完毕\r\n\t    if (this.currentIndex === this.total) {\r\n\t      if (isFunc(this.option.onComplete)) {\r\n\t        this.option.onComplete(this.total)\r\n\t      }\r\n\t    }\r\n\t  }\r\n\t\r\n\t  //暴露公共方法\r\n\t  root.ResLoader = resLoader\r\n\t}(window))\n\n/***/ }\n])","(function (root) {\r\n  var isFunc = function (f) {\r\n    return typeof f === 'function'\r\n  }\r\n\r\n  //构造器函数\r\n  var resLoader = function (config) {\r\n    this.option = {\r\n      resourceType: 'image', //资源类型，默认为图片\r\n      baseUrl: './', //基准url\r\n      resources: [], //资源路径数组\r\n      onStart: null, //加载开始回调函数，传入参数total\r\n      onProgress: null, //正在加载回调函数，传入参数currentIndex, total\r\n      onComplete: null //加载完毕回调函数，传入参数total\r\n    }\r\n    if (config) {\r\n      for (i in config) {\r\n        this.option[i] = config[i]\r\n      }\r\n    }\r\n    else {\r\n      alert('参数错误！')\r\n      return\r\n    }\r\n    this.status = 0 //加载器的状态，0：未启动   1：正在加载   2：加载完毕\r\n    this.total = this.option.resources.length || 0 //资源总数\r\n    this.currentIndex = 0 //当前正在加载的资源索引\r\n  }\r\n\r\n  resLoader.prototype.start = function () {\r\n    this.status = 1\r\n    var _this = this\r\n    var baseUrl = this.option.baseUrl\r\n    for (var i = 0, l = this.option.resources.length; i < l; i++) {\r\n      var r = this.option.resources[i], url = ''\r\n      if (r.indexOf('http://') === 0 || r.indexOf('https://') === 0) {\r\n        url = r\r\n      }\r\n      else {\r\n        url = baseUrl + r\r\n      }\r\n\r\n      var image = new Image()\r\n      image.onload = function () {_this.loaded()}\r\n      image.onerror = function () {_this.loaded()}\r\n      image.src = url\r\n    }\r\n    if (isFunc(this.option.onStart)) {\r\n      this.option.onStart(this.total)\r\n    }\r\n  }\r\n\r\n  resLoader.prototype.loaded = function () {\r\n    if (isFunc(this.option.onProgress)) {\r\n      this.option.onProgress(++this.currentIndex, this.total)\r\n    }\r\n    //加载完毕\r\n    if (this.currentIndex === this.total) {\r\n      if (isFunc(this.option.onComplete)) {\r\n        this.option.onComplete(this.total)\r\n      }\r\n    }\r\n  }\r\n\r\n  //暴露公共方法\r\n  root.ResLoader = resLoader\r\n}(window))"],"sourceRoot":"webpack-module://"}